<Window x:Class="CluSys.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:src="clr-namespace:CluSys"
        xmlns:lib="clr-namespace:CluSys.lib"
        mc:Ignorable="d"

        Icon="App.ico"
        Title="CluSys"
        MinHeight="650"
        MinWidth="1024"
        WindowState="Maximized"
        WindowStartupLocation="CenterScreen"

        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal" 
        TextOptions.TextRenderingMode="Auto"        
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <src:StringConverter x:Key="StringConverter" />
        <src:ModalityDotGetAthletesConverter x:Key="ModalityDotGetAthletesConverter" />
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100px" />
                <ColumnDefinition Width="0.7*" />
                <ColumnDefinition Width="0.3*" />
            </Grid.ColumnDefinitions>

            <Image Source="App.ico" Width="24" Height="24" Margin="8" />
            <!--<TextBlock Grid.Column="1" VerticalAlignment="Center" />-->
            <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="8" HorizontalAlignment="Right" VerticalAlignment="Center">
                <Ellipse Width="24" Height="24" Margin="4">
                    <Ellipse.Fill>
                        <ImageBrush ImageSource="App.ico" Stretch="UniformToFill" />
                    </Ellipse.Fill>
                </Ellipse>
                <TextBlock Grid.Column="2" Margin="4" HorizontalAlignment="Center" VerticalAlignment="Center">Menu to utilizador</TextBlock>
                <Button Style="{StaticResource MaterialDesignToolButton}" Margin="4"
                        materialDesign:RippleAssist.IsDisabled="True">
                    <materialDesign:PackIcon Kind="ChevronDown" />
                </Button>
            </StackPanel>
        </Grid>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100px" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <DockPanel Margin="8">
                <Button Click="GoHome" DockPanel.Dock="Top" Width="48" Height="48"
                        Style="{StaticResource MaterialDesignToolButton}"
                        materialDesign:RippleAssist.IsCentered="True">
                    <materialDesign:PackIcon Kind="Home" />
                </Button>
                <ListBox x:Name="OpenAthletesList"
                         PreviewMouseUp="OpenAthlete"
                         HorizontalContentAlignment="Center"
                         ScrollViewer.VerticalScrollBarVisibility="Hidden">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <StackPanel>
                                <Ellipse Width="24" Height="24" Margin="0 0 0 4">
                                    <Ellipse.Fill>
                                        <ImageBrush ImageSource="{Binding Path=Photo}" Stretch="UniformToFill" />
                                    </Ellipse.Fill>
                                </Ellipse>
                                <TextBlock Margin="0 4 0 0" Text="{Binding Path=FirstName}" HorizontalAlignment="Center" />
                                <TextBlock Margin="0 0 0 4" Text="{Binding Path=LastName}" HorizontalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ListBox>
            </DockPanel>

            <Grid x:Name="HomeContent" Visibility="Hidden" Grid.Column="1" Margin="8">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <ListBox x:Name="OpenEvaluations"
                         Margin="8"
                         PreviewMouseUp="OpenAthlete"
                         Grid.IsSharedSizeScope="True"
                         ItemsSource="{Binding Source=Fallback}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel IsItemsHost="True" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" SharedSizeGroup="ColumnSize" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <Ellipse Height="48" Width="48" Grid.Row="0" Margin="8">
                                    <Ellipse.Fill>
                                        <ImageBrush ImageSource="{Binding Path=Photo}" Stretch="UniformToFill" />
                                    </Ellipse.Fill>
                                </Ellipse>
                                <TextBlock HorizontalAlignment="Center" Grid.Row="1">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0} {1}">
                                            <Binding Path="FirstName" />
                                            <Binding Path="LastName" />
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                                <TextBlock HorizontalAlignment="Center" Grid.Row="2" Text="{Binding Path=Modality}" />
                            </Grid>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ListBox>

                <ItemsControl x:Name="ModalityList"
                              Grid.Row="1"
                              ItemsSource="{Binding Source=Fallback}"
                              Grid.IsSharedSizeScope="True">
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel IsItemsHost="True" />
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <materialDesign:Card Margin="4" Width="240">
                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="*" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <TextBlock Text="{Binding Path=name}"
                                               Foreground="White" Background="{DynamicResource PrimaryHueMidBrush}"
                                               FontWeight="Bold" Padding="8 24 8 0" />
                                    <ListBox Grid.Row="1" Margin="8 24 8 0" PreviewMouseUp="OpenAthlete"
                                             ItemsSource="{Binding Converter={StaticResource ModalityDotGetAthletesConverter}, ConverterParameter='GetAthletes'}">
                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <TextBlock>
                                                    <TextBlock.Text>
                                                        <MultiBinding StringFormat="{}{0} {1}">
                                                            <Binding Path="FirstName" />
                                                            <Binding Path="LastName" />
                                                        </MultiBinding>
                                                    </TextBlock.Text>
                                                </TextBlock>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ListBox>
                                    <Border Grid.Row="2" Margin="8" Background="White" CornerRadius="3" ToolTip="Enter to search, ignore case">
                                        <DockPanel LastChildFill="True">
                                            <Button Style="{DynamicResource MaterialDesignToolButton}"
                                                    Height="24" Width="24">
                                                <materialDesign:PackIcon Kind="Magnify" Opacity=".56" />
                                            </Button>
                                            <TextBox Margin="4 0 0 0" TextChanged="SearchBox_TextChanged"
                                                     materialDesign:HintAssist.Hint="Search" x:Name="SearchBox"
                                                     materialDesign:TextFieldAssist.DecorationVisibility="Hidden" BorderThickness="0"
                                                     VerticalAlignment="Center" />
                                        </DockPanel>
                                    </Border>
                                </Grid>
                            </materialDesign:Card>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </Grid>

            <ItemsControl x:Name="AthleteContent" Visibility="Visible" Grid.Column="1" Margin="8"
                          ItemsSource="{Binding Source=Fallback}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <StackPanel Orientation="Horizontal" Margin="8" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <Ellipse Width="48" Height="48" Margin="8">
                                    <Ellipse.Fill>
                                        <ImageBrush ImageSource="{Binding Path=Photo}" Stretch="UniformToFill" />
                                    </Ellipse.Fill>
                                </Ellipse>
                                <TextBlock Margin="8" VerticalAlignment="Center"
                                           Style="{StaticResource MaterialDesignHeadlineTextBlock}">
                                    <TextBlock.Text>
                                        <MultiBinding StringFormat="{}{0} {1} {2}">
                                            <Binding Path="FirstName" FallbackValue="FirstName"/>
                                            <Binding Path="MiddleName" FallbackValue=""/>
                                            <Binding Path="LastName" FallbackValue="LastName"/>
                                        </MultiBinding>
                                    </TextBlock.Text>
                                </TextBlock>
                            </StackPanel>

                            <DockPanel Grid.Row="1" Margin="8" LastChildFill="True">
                                <materialDesign:Chip Visibility="{Binding Path=activeEvaluation, Converter={StaticResource BooleanToVisibilityConverter}}" Content="Em tratamento de lesão" Margin="4" DockPanel.Dock="Right" />
                                <materialDesign:Chip Icon="A" Content="{Binding Path=Height, Converter={StaticResource StringConverter}, ConverterParameter='{}{0:N2} m'}" Margin="4" />
                                <materialDesign:Chip Icon="P" Content="{Binding Path=Weight, Converter={StaticResource StringConverter}, ConverterParameter='{}{0:N2} kg'}" Margin="4" />
                            </DockPanel>

                            <ScrollViewer Grid.Row="2" Margin="24"
                                          HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Disabled">
                                <ItemsControl>
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <WrapPanel IsItemsHost="True" />
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4"
                                                       Text="{Binding Path=Height, StringFormat={}Avaliação #{0}}"
                                                       Style="{StaticResource MaterialDesignHeadlineTextBlock}" />
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Click="Button_Click" Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>

                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4" Style="{StaticResource MaterialDesignHeadlineTextBlock}">Avaliação #</TextBlock>
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>

                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4" Style="{StaticResource MaterialDesignHeadlineTextBlock}">Avaliação #</TextBlock>
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>

                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4" Style="{StaticResource MaterialDesignHeadlineTextBlock}">Avaliação #</TextBlock>
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>

                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4" Style="{StaticResource MaterialDesignHeadlineTextBlock}">Avaliação #</TextBlock>
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>

                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4" Style="{StaticResource MaterialDesignHeadlineTextBlock}">Avaliação #</TextBlock>
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>

                                    <materialDesign:Card Margin="8" Width="200" Background="{DynamicResource PrimaryHueMidBrush}"
                                                     Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}">
                                        <StackPanel>
                                            <TextBlock Margin="16 16 16 4" Style="{StaticResource MaterialDesignHeadlineTextBlock}">Avaliação #</TextBlock>
                                            <Separator Grid.Row="1" Style="{StaticResource MaterialDesignLightSeparator}"/>
                                            <TextBlock Grid.Row="2" Margin="16 0 16 0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignBody2TextBlock}">March 19, 2016</TextBlock>
                                            <Button Grid.Row="3" Style="{StaticResource MaterialDesignToolButton}">
                                                <materialDesign:PackIcon Kind="ChevronDown" Foreground="{DynamicResource PrimaryHueDarkForegroundBrush}" />
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:Card>
                                </ItemsControl>
                            </ScrollViewer>

                            <Expander Panel.ZIndex="-1" Margin="8 -48 8 16" x:Name="expander" Grid.Row="3" HorizontalAlignment="Stretch">
                                <StackPanel Margin="24,8,24,8" TextBlock.Foreground="{DynamicResource MaterialDesignBody}">
                                    <TextBlock Text="Your Content" />
                                    <TextBlock Opacity=".68" TextWrapping="Wrap" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."/>
                                </StackPanel>
                            </Expander>

<!--
                            <materialDesign:DialogHost Grid.Row="3" >
                                <materialDesign:DialogHost.DialogContent>
                                    <ScrollViewer MaxHeight="100" VerticalScrollBarVisibility="Auto">
                                        <StackPanel>
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                    <TextBlock Text="hgajs" />
                                        </StackPanel>
                                    </ScrollViewer>
                                </materialDesign:DialogHost.DialogContent>
                                <StackPanel>
                                    <TextBlock Text="kdja" />
                                    <TextBlock Text="kdja" />
                                    <TextBlock Text="kdja" />
                                    <TextBlock Text="kdja" />
                                    <TextBlock Text="kdja" />
                                    <Button Command="{x:Static materialDesign:DialogHost.OpenDialogCommand}" />
                                </StackPanel>
                            </materialDesign:DialogHost>
                            -->
                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Grid>
    </Grid>
</Window>
